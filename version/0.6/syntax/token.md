[Syntax](index.md) | [Previous: Timestamp Header](timestamp.md) | [Next: Host Header](host.md)

---

Token Header
============

The Token Header is _optional_ and has the same structure in all three Morphologies.

The Token Header `pair` key must be `token` and the `value` must be a JSON `array`. The `array` must have either one or two `elements`.

The Token Header is a Protocol-Level header, meaning that only Engines should set and use its content.

### Transaction ID

The first `element`, if present, must be a JSON `string` containing some form of [Universally Unique Identifier](http://tools.ietf.org/html/rfc4122). The Transaction ID must be generated by the Engine that first received the Dispatch in its object form, if a Callback is provided with the Dispatch. This Transaction ID will allow this or Remote Engines to match the corresponding Answer Dispatches. Any value set to the Token Header by Emitters will be discarded.

### Triggering ID

The second `element`, if present, must also be a JSON `string` containing some form of Universally Unique Identifier. A Triggering ID must be generated by the Engine for each triggered endpoint in the Subscription Table, _only if_ the Dispatch that triggered the endpoint bears a Transaction ID. 

Since Engines behaving as gateways receive the Dispatch already with a Triggering ID set by the previous Engine, they will replace the Triggering ID and the original value will be lost in the sense that no actual Answer to the Dispatch will bear the original Triggering ID in its Resource Header. Likewise, the sender Engine which kept track of the original Triggering ID will be unable to release the corresponding Subscription to the Answers to the Dispatch. This is an intended effect in JSTP version 0.5 since Answers are supposed to arrive within a short time frame and the sender Engine must release the corresponding Subscription anyway when it times out (around 10 seconds, but left to be configured in the Engines).

Sample
------

UUID v4 Transaction ID/Triggering ID pair:

```javascript
"token":["52c49ce2-4b19-4c18-adcf-881effc91dd8", "1505c04c-7be9-4c78-83ac-786f7158a933"]
```

---

[Syntax](index.md) | [Previous: Timestamp Header](timestamp.md) | [Next: Host Header](host.md)
